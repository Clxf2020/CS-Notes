### 块级作用域

作用域
作用域是指在程序中定义变量的区域，该位置决定了变量的生命周期。通俗地理解，作用域就是变量与函数的可访问范围，即作用域控制着变量和函数的可见性和生命周期

在ES6之前，ES的作用域只有两种：全局作用域和函数作用域。
- 全局作用域中的对象在代码中的任何地方都能访问，其生命周期伴随着页面的生命周期。
- 函数作用域就是在函数内部定义的变量或者函数，并且定义的变量或者函数只能在函数内部被访问。函数执行结束之后，函数内部定义的变量会被销毁。

变量提升带来的问题
1. 变量容易在不被察觉的情况下被覆盖掉
```js
 var myname = "极客时间"
    let m="123"
    function showName(){
        console.log(myname); //undefined
        console.log(m)       //123
        if(0){
            var myname = "极客邦"
        }
        console.log(myname);  //undefined
    }
    showName()
```
2. 本应销毁的变量没有被销毁
```js
function foo(){
  for (var i = 0; i < 7; i++) {
  }
  console.log(i);   //7
}
foo()

function varTest() {
  var x = 1;
  if (true) {
    var x = 2;  // 同样的变量!
    console.log(x);  // 2
  }
  console.log(x);  // 2
}
```
var的作用范围是整个函数，所以在编译阶段，最终只生成了一个变量x

### 块级作用域 let const
作用块内声明的变量不影响块外面的变量

### 作用域链
```js
function bar() {
    console.log(myName)
}
function foo() {
    var myName = " 极客邦 "
    bar()
}
var myName = " 极客时间 "
foo()
```
每个执行上下文的变量环境中，都包含了一个外部引用，用来指向外部的执行上下文，我们把这个外部引用称为outer。

当一段代码使用了一个变量时，JavaScript 引擎首先会在“当前的执行上下文”中查找该变量， 比如上面那段代码在查找 myName 变量时，如果在当前的变量环境中没有查找到<br>
那么 JavaScript 引擎会继续在 outer 所指向的执行上下文中查找。

bar 函数和 foo 函数的 outer 都是指向全局上下文的，这也就意味着如果在 bar 函数或者 foo 函数中使用了外部变量，那么 JavaScript 引擎会去全局执行上下文中查找。<br>
我们把这个查找的链条就称为作用域链。

### 词法作用域
词法作用域就是指作用域是由代码中函数声明的位置来决定的，所以词法作用域是静态的作用域，通过它就能够预测代码在执行过程中如何查找标识符

### 块级作用域中的变量查找
在编写代码的时候，如果你使用了一个在当前作用域中不存在的变量，这时 JavaScript 引擎就需要按照作用域链在其他作用域中查找该变量(全局作用域)

ES6 是支持块级作用域的，当执行到代码块时，如果代码块中有 let 或者 const 声明的变量，那么变量就会存放到该函数的词法环境中。

